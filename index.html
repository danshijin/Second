<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<script src="js/mui.min.js"></script>
		<script src="js/echarts.js"></script>
		<link href="css/mui.min.css" rel="stylesheet" />
		<script type="text/javascript" charset="utf-8">
			mui.init();
		</script>
	</head>

	<body>
		<!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->
		<div id="main" style="width: 100%;height:400px;"></div>
	</body>
	<script>
		var url = "https://www.amazon.com/s/ref=nb_sb_noss?url=search-alias%3Daps&field-keywords=sne329";
		mui.get(url, {}, function(data){
			getWatchesPrice(data);
		},"html");
		
		function getWatchesPrice(content) {
			console.log(content.length); 
			console.log(content.substring(10000,11000))
			url = "https://www.amazon.com/s/ref=nb_sb_noss?url=search-alias%3Daps&field-keywords=sne329";
			var priceStartStr = "a-size-base a-color-price s-price a-text-bold\">$";
			var priceList = getListByTag(content, priceStartStr, "<");
			var itemNameStartStr = "a-link-normal s-access-detail-page  a-text-normal\" title=\"";
			var itemNameList = getListByTag(content, itemNameStartStr, "\"");
			console.log(priceList);
			console.log(itemNameList);
		}
		
		function getListByTag(content, startTag, endTag) {
			var priceList = [];
			var startIndex = 0;
			var maxItemCount = 5;
			var index = 0;
			while(true) {
				startIndex = content.indexOf(startTag, startIndex);
				console.log(startIndex)
				if(startIndex == -1) {
					break;
				}
				startIndex += startTag.length();
				var endIndex = content.indexOf(endTag, startIndex);
				var price = content.substring(startIndex, endIndex);
				console.log(price);
				priceList.push(price);
				if(index >= maxItemCount) {
					break;
				}
				index++;
			}
			return priceList;
		}
	
		// 基于准备好的dom，初始化echarts实例
		var myChart = echarts.init(document.getElementById('main'));

		// 指定图表的配置项和数据
		var option = {
			title: {
				text: 'ECharts 入门示例'
			},
			tooltip: {},
			legend: {
				data: ['销量']
			},
			xAxis: {
				data: ["衬衫", "羊毛衫", "雪纺衫", "裤子", "高跟鞋", "袜子"]
			},
			yAxis: {},
			series: [{
				name: '销量',
				type: 'bar',
				data: [5, 20, 36, 10, 10, 20]
			}]
		};

		// 使用刚指定的配置项和数据显示图表。
		myChart.setOption({
			series: [{
				name: '访问来源',
				type: 'pie',
				radius: '55%',
				data: [{
					value: 400,
					name: '搜索引擎'
				}, {
					value: 335,
					name: '直接访问'
				}, {
					value: 310,
					name: '邮件营销'
				}, {
					value: 274,
					name: '联盟广告'
				}, {
					value: 235,
					name: '视频广告'
				}]
			}]
		})
	</script>

</html>